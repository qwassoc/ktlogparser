<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <title>KT Log Parser</title>
  <style type="text/css">
  pre { background-color: #eee; border: 1px solid black; }
  </style>
  </head>
  <body>
	<h1>KT Log Parser</h1>
	<p>
	  A PHP script that parses <strong>client's console logs</strong> from matches in KTX mods and extracts player stats from them into PHP array structures (XML or JSON supported too). It's suitable for leagues to offer rich detailed match statistics on their webpages, much more than just frag amounts.
	<p>
	  Benefits:
	  <ul>
	  <li>Works with all current versions of existing clients (ezQuake, FuhQuake)
	  <li>Works with all current versions of server mods (KTPro or KTX)
	  <li>Doesn't need users to download and upload huge demos to get stats
	  <li>Easy to use on your league site
	  <li>It's free and open source
	  </ul>
	  	  
  	<h2>Live demo</h2>
	<p>Upload your console log here and the script will dump the content of the PHP structure it creates.</p>
	<form action="livedemo.php" method="post" enctype="multipart/form-data">
	<input type="file" name="testfile">
	<input type="submit" value="submit">
	</form>
	  
	<h2>Requirements</h2>
	<p>
	  Clients need to set following settings:
	<pre><code>
    match_auto_logconsole 2
	</code></pre>
	
	<p>
	  That will make client automatically log console text during the match, which is exactly what this script parses.
	  If user forgot to enable console logging, he can create the log later from the demo, like this:
	  <pre><code>
    playdemo my4on4match.mvd; log mylog; demo_jump 30:00; log stop
    </pre></code>
	
	<p>
	  A .log file like <a href="a.log">this</a> or <a href="b.log">this</a> will get saved in users quake/log dir, from where it can be uploaded to <strong>your website</strong>.
	  Then is the time for this script to take some action - you use it to read the contents of the log. It's up to you which stats you'll print in what form, this script just gives you the raw data. 
	  
	<h2>Usage</h2>
	<pre><code>
    &lt;?php
    include "ktlogpsr.php";
    
    $parser = new KTLogParser;
    $r = $parser-&gt;Parse("a.log");
    
    if (is_null($r)) {
        echo "Error: ".$parser-&gt;ErrorDesc();
    }
    else {
        echo "&lt;pre&gt;&lt;code&gt;";
        print_r($r);    // print_r is in-built PHP function that performs
                        // formatted print of the contents of the argument
                        // so it's here only for demonstrational purposes :-)
        echo "&lt;/code&gt;&lt;/pre&gt;";
    }
    ?&gt;
    </pre></code>
	
	<p>Will produce <a href="output.html">following output</a></p>
	
	<h2>Download</h2>
	<p>Grab <a href="http://www.qw-dev.net/repositories/changes/ktxstats/ktlogpsr/ktlogpsr.php">ktlogpsr.php</a> from the project SVN</p>
	
  </body>
</html>
